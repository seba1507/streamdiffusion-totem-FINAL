# Requirements.txt - Optimizado para StreamDiffusion con CUDA 12.1
# Compatible con NVIDIA L40S - Versiones corregidas

# =========================
# PyTorch y componentes base
# =========================
--extra-index-url https://download.pytorch.org/whl/cu121
torch==2.1.1+cu121
torchvision==0.16.1+cu121
triton==2.1.0

# =========================
# XFormers (optimización de memoria)
# =========================
xformers==0.0.23

# =========================
# Ecosistema Hugging Face
# =========================
diffusers==0.24.0
transformers==4.36.2
accelerate==0.25.0
huggingface_hub==0.19.4
safetensors==0.4.1
tokenizers==0.15.0

# =========================
# TensorRT y herramientas (VERSIONES CORREGIDAS)
# =========================
# TensorRT - usar versión disponible
--extra-index-url https://pypi.nvidia.com
nvidia-tensorrt==8.4.3.1
# O si esa no funciona, usa:
# tensorrt==8.6.1

# Herramientas de TensorRT
polygraphy==0.49.0
onnx==1.15.0
onnx-graphsurgeon==0.3.27

# =========================
# Servidor Web y APIs
# =========================
fastapi==0.111.0
uvicorn[standard]==0.29.0
websockets==12.0
python-multipart==0.0.6

# =========================
# Procesamiento de imágenes
# =========================
pillow==10.1.0
opencv-python-headless==4.8.1.78
numpy==1.24.4
scipy==1.11.4

# =========================
# Utilidades adicionales
# =========================
tqdm==4.66.1
typing-extensions==4.9.0
pydantic==2.5.3

# =========================
# StreamDiffusion (al final, formato corregido)
# =========================
git+https://github.com/cumulo-autumn/StreamDiffusion.git@main
